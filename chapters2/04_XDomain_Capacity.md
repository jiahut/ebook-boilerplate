# XDomain Capacity

## 本节站在技术的视角, 回答XDomain提供哪些能力, 给业务带来那些价值,

-   XDomain可看做业务单据的结构化数据库, 具体业务应用在此数据库之上快速进行组装
-   XDomain理解是一个单据业务消息总线, 外围应用与XDomian完成对接后, 各应用之间的就可以进行协同  
    -   不需要每个应用之间分别定义接口来对齐概念和数据

在实际的项目中, 我们可能还需要不断思索哪些功能或特性是可以下沉到XDomain中来进行提供, 哪些其实是应该在上层中进行组装  

**注意: 这里说的XDomain是一个整体的概念, 包含可能是由低层OQS提供出来的能力**  


## 如下根据接口或者服务的类型可以划分,

-   子域元数据的查询 (数据结构)  
    -   外部系统配置规则等需要获取XDomain的数据结构
    -   原则上XDomain应该提供这类的接口, 但是OQS已经具备了这个能力, 不需重新开发
    -   所以XDomain开放子域元数据查询, 注意 **该接口必须是只读的**

-   数据集的历史记录  
    -   包括版本记录和状态变更记录
    -   直接使用OQS的历史记录功能

-   自定义搜索能力  
    -   子域在定义时标识可搜索字段
    -   业务应用使用OQS的查询DSL进行搜索

-   子域继承  
    -   子域的定义时支持在一个既有的子域的基础上进行继承
    -   继承的能力依托于OQS的限制 (当前只支持5层的继承结构)

-   子域只读的数据查询  
    -   原则上XDomain不应该暴露底层的子域模型, 业务需要查询具体的子域数据, 如果做成聚合对外开发成本和收益不换算, 没有必要
    -   所以XDomain对外提供只读的子域访问能力, **注意: 这里提供子域的数据是只读视图**

-   数据的变更  
    -   所有对子域的修改必须由XDomain提供的接口完成  
        -   即使明确只修改某个具体子域的具体字段
        -   XDomain了解并已知所有对子域的新增/修改路径
    -   XDomain的一次数据变更操作在一个事务内完成
    -   XDomain需要维护XDomain的子域的数据结构和校验逻辑

-   通用的数据校验逻辑  
    -   如果XDomain是一个数据库, 数据落库之前应该进行过相应的校验检查, 存储的数据满足一定的约束  
        -   目前具体的约束没有想清楚, 需要更具体的业务场景来抽象
    -   所以当前校验的逻辑采用责任链的设计模式, 即满足链上一些列的规则后落库  
        -   校验逻辑的装配交给上层的应用, XDomai只提供校验的工具

